version: '3'
services:
  php:
    container_name: qihaoming-php
    build: ../../php
    restart: always
    volumes:
      - ../../../:/var/www/app
      - ../../shell/startup.sh:/var/www/app/startup.sh
      - /data/qihaoming/frontend/runtime:/var/www/app/frontend/runtime
      - /data/qihaoming/backend/runtime:/var/www/app/backendplus/runtime
      - /data/qihaoming/logs:/data/logs
      - /data/qihaoming/nignx/logs:/var/log/nginx
      - /data/qihaoming/uploads:/data/uploads
      - /data/qihaoming/vendor:/var/www/app/vendor
    environment:
      TZ: Asia/Shanghai
    command: bash -c "cd  /var/www/app && ./startup.sh "
    ports:
      - 8383:80

  qhmdb:
    container_name: qhm-mysql
    image: mysql:5.7
    volumes:
      - /data/qhm/mysql/data:/var/lib/mysql
    restart: always
    environment:
      - MYSQL_ROOT_PASSWORD=NuwJYK4s4MGpbZ
      - MYSQL_DATABASE=qhmdb
      - MYSQL_USER=qhmdb
      - MYSQL_PASSWORD=AFrokRANYodgYqfdnCpHc4RV
      - TZ=Asia/Shanghai
    ports:
      - 6033:3306


